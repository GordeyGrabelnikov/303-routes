<p>
  <strong> <%= t('.event_name') %> </strong>
  <%= @event.event_name %>
</p>
  <strong><%= t('.event_description') %> </strong>
  <%= @event.event_description %>
</p>
</p>
  <strong><%= t('.event_route') %> </strong>
  <%= link_to "#{@event.route.name}",  @event.route %>

</p>
  <% if current_user == nil %>
  <p> <%= link_to t('devise.authorization.buttons.log_in'), new_user_registration_path %> <%= t('.register_requirement') %> </p>
  <% else %>
    <% if @event.users.include?(current_user) %>
      <%=  link_to  t('.unsubscribe'), event_events_user_path(@event.events_users.find_by(user_id: current_user.id)), method: :delete, data: {confirm: 'Are you sure?'}, class: 'btn btn-primary' %>
    <% else %>
      <%=  link_to  t('.subscribe'), "/events/#{@event.id}/events_users", method: :post, class: 'btn btn-success' %>
    <% end %>
  <% end %>


</p>

</p>
<strong><%= t('.event_author') %></strong>
<%= link_to root_path do %>
  <% creator = @event.users.find_by(events_users: {role: EventsUser.roles[:creator]}) %>
    <div class="pull-left">
      <%= image_tag(creator.avatar, style: "width:45px;height:45px;border-radius:100%;object-fit:cover") if creator.avatar.attached? %>
    </div>
    <div class="media-body">
      <h4 class="media-heading"><%= "#{creator.first_name} #{creator.last_name}" %></h4>
    </div>
<% end %>
<p>

<p>
  <strong><%= t('.event_subscribers') %></strong>
  <div>
    <% @event.users.each do |x|%>
      <%= link_to root_path do %>
        <%= image_tag(x.avatar, style: "width:60px;height:60px;border-radius:100%;object-fit:cover") if x.avatar.attached? %>
      <% end %>
    <% end %>
  </div>
</p>

<div class="row">
  <% if current_user %>
    <div class="small-2 large-4 columns">
      <%= rating_for_user @event, current_user, 'event', half_show: true, star: 5, readonly: true, disable: true, cancel: false%>
      <%= imdb_style_rating_for @event, 'event' %>
    </div>
  <% end %>
</div>

<%= link_to t('helpers.links.back'), events_path, class: 'btn btn-success' %>
<%= link_to t('helpers.titles.edit', model: t('activerecord.models.event')), edit_event_path, class: 'btn btn-success' %>

